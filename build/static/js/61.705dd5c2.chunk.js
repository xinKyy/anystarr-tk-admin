(this["webpackJsonpreact-admin"]=this["webpackJsonpreact-admin"]||[]).push([[61],{1826:function(e,a,t){"use strict";t.r(a);t(54);var n=t(55),l=t.n(n),r=(t(72),t(66)),i=t.n(r),c=(t(51),t(50)),s=t.n(c),o=(t(57),t(59)),m=t.n(o),d=(t(58),t(60)),u=t.n(d),b=(t(69),t(70)),g=t.n(b),p=(t(65),t(67)),E=t.n(p),f=(t(86),t(87)),h=t.n(f),_=(t(76),t(78)),y=t.n(_),v=t(62),O=t(53),k=(t(225),t(229)),j=t.n(k),w=(t(63),t(61)),C=t.n(w),I=(t(74),t(75)),x=t.n(I),S=t(0),F=t.n(S),z=t(71),P=(t(107),t(56)),N=t(95),T=(t(114),t(15),t(228),t(73)),D=t.n(T),L=(t(346),t(1838)),R=t(186),A=(x.a.MonthPicker,x.a.RangePicker,C.a.Option),J=([{label:"\u5f85\u5904\u7406",value:"to_handle"},{label:"\u5df2\u5904\u7406",value:"handled"}].map((function(e,a){return F.a.createElement(A,{key:a,value:e.value},e.label)})),function(e,a,t,n){return[{title:"Action",dataIndex:"edit",key:"edit",width:"100",align:"center",render:function(a,t){return F.a.createElement("div",null,F.a.createElement("a",{className:"action-btn",onClick:function(){e(t)}},F.a.createElement(L.a,null),F.a.createElement("span",{style:{marginLeft:"4px"}},"Edit")))}},{title:"Promotion ID",dataIndex:"id",key:"id",align:"center",render:function(e,a){return F.a.createElement("span",{className:"table-id"},e)}},{title:"Category",dataIndex:"category",key:"category",align:"center",render:function(e,a){return F.a.createElement(F.a.Fragment,null,1==e?"Top banner":2==e?"abComo selection banner":3==e?"Rewarded task -sigle":4==e?"Rewarded task -dual":"")}},{title:"Promotion Title",dataIndex:"title",key:"title",width:"100",align:"center"},{title:"Post start time",dataIndex:"post_start_time",key:"post_start_time",align:"center"},{title:"Post end time",dataIndex:"post_end_time",key:"post_end_time",align:"center"},{title:"Posted by",dataIndex:"operator_name",key:"operator_name",align:"left",render:function(e,a){return F.a.createElement("div",{style:{width:"120px"}},F.a.createElement(R.a,{name:e,style:{display:"inline-block"}}),F.a.createElement("span",null,e))}},{title:"status",dataIndex:"status",key:"status",align:"center",render:function(e,a){return F.a.createElement("div",{style:{width:"120px"}},F.a.createElement(j.a,{status:2==e?"success":1==e?"processing":0==e?"error":"default"}),0==e?"Ended":1==e?"Pending to post":2==e?"Posting":"")}},{title:"Show to all",dataIndex:"is_whitelist",key:"is_whitelist",align:"center",render:function(e,a){return F.a.createElement(F.a.Fragment,null,0==e?"All users":1==e?"Customize":"")}},{title:"Update date",dataIndex:"update_time",key:"update_time",width:"100",align:"center"}]}),q={labelCol:{span:8},wrapperCol:{span:16}},K=function(e){var a=E.a.useForm(),t=Object(O.a)(a,1)[0];return F.a.createElement(E.a,Object.assign({},q,{form:t,name:"advanced_search",className:"ant-advanced-search-form",onFinish:function(a){console.log("values",a),e.changeSearch(a)}}),F.a.createElement(m.a,{gutter:24},F.a.createElement(u.a,{span:8},F.a.createElement(E.a.Item,{name:"id",label:"ID"},F.a.createElement(g.a,null))),F.a.createElement(u.a,{span:8},F.a.createElement(E.a.Item,{name:"category",label:"Category"},F.a.createElement(C.a,{allowClear:!0},F.a.createElement(A,{value:1},"Top banner"),F.a.createElement(A,{value:2},"abComo selection banner"),F.a.createElement(A,{value:3},"Rewarded task -sigle"),F.a.createElement(A,{value:4},"Rewarded task -dual"),F.a.createElement(A,{value:5},"Feature Product")))),F.a.createElement(u.a,{span:8},F.a.createElement(E.a.Item,{name:"title",label:"Title"},F.a.createElement(g.a,null)))),F.a.createElement(m.a,{gutter:24},F.a.createElement(u.a,{span:8},F.a.createElement(E.a.Item,{name:"link_type",label:"Link type"},F.a.createElement(C.a,{allowClear:!0},F.a.createElement(A,{value:1},"Internal Link"),F.a.createElement(A,{value:2},"External Link"))))),F.a.createElement(m.a,null,F.a.createElement(u.a,{span:24,style:{textAlign:"right"}},F.a.createElement(s.a,{type:"primary",htmlType:"submit",loading:e.loading},"Search"),F.a.createElement(s.a,{style:{margin:"0 8px"},onClick:function(){t.resetFields()}},"Reset"))))},V=function(e){var a=e.visible,t=e.onCreate,n=e.onCancel,l=e.formData,r=(e.disabled,E.a.useForm()),i=Object(O.a)(r,1)[0],c=Object(S.useState)({}),s=Object(O.a)(c,2),o=(s[0],s[1],Object(S.useState)(!1)),m=Object(O.a)(o,2);m[0],m[1];Object(S.useEffect)((function(){console.log("formdata",l),Object.keys(l).length?i.setFieldsValue(l):i.resetFields()}),[l]);return F.a.createElement(h.a,{visible:a,title:"sku",okText:"Submit",cancelText:"Cancel",onCancel:n,onOk:function(){i.validateFields().then((function(e){i.resetFields(),t(e)})).catch((function(e){console.log("Validate Failed:",e)}))}},F.a.createElement(E.a,Object.assign({},{labelCol:{span:6},wrapperCol:{span:14}},{form:i,name:"form_in_modal"}),F.a.createElement(E.a.Item,{name:"id",label:"ID"},F.a.createElement(g.a,{disabled:!0})),F.a.createElement(E.a.Item,{name:"tier_1_cat",label:"Tier1 Cat",rules:[{required:!0}]},F.a.createElement(g.a,null)),F.a.createElement(E.a.Item,{name:"tier_2_cat",label:"Tier2 Cat"},F.a.createElement(g.a,null)),F.a.createElement(E.a.Item,{name:"tier_3_cat",label:"Tier3 Cat"},F.a.createElement(g.a,null)),F.a.createElement(E.a.Item,{name:"shown_name",label:"Sku name",rules:[{required:!0}]},F.a.createElement(g.a,null))))},B=function(e){var a=Object(S.useState)({list:[],pagination:{current:1,pageSize:10},search:{},loading:!0,visible:!1,disabled:!1,formData:{}}),t=Object(O.a)(a,2),n=t[0],r=t[1],c=Object(S.useState)({visible:!1,data:{}}),o=Object(O.a)(c,2);o[0],o[1];Object(S.useEffect)((function(){n.pagination;var e={start_row:0,page_size:n.pagination.pageSize};d(e)}),[]);var d=function(e){n.pagination,n.search;console.log("role",e),r(Object(v.a)(Object(v.a)({},n),{},{loading:!0})),Object(P.xb)(JSON.stringify(e)).then((function(a){r(Object(v.a)(Object(v.a)({},n),{},{visible:!1,list:a.data.list&&Object(N.getKeyList)(a.data.list),loading:!1,search:e.search,pagination:{total:a.data.pager.total,current:e.start_row/e.page_size+1,pageSize:e.page_size}}))})).catch((function(e){console.log("err",e)}))};return F.a.createElement(l.a,{className:"animated fadeIn"},F.a.createElement(V,{visible:n.visible,onCreate:function(e){console.log("data",e),e.is_show_app=1,Object(P.s)({categoryJson:JSON.stringify(e)}).then((function(e){i.a.success("success");var a=Object(v.a)(Object(v.a)({},n.search),{},{start_row:0,page_size:10});d(a)})).catch((function(e){console.log("err",e)}))},onCancel:function(){r(Object(v.a)(Object(v.a)({},n),{},{visible:!1}))},formData:n.formData,disabled:n.disabled}),F.a.createElement("div",{className:"web-bread-c"},F.a.createElement(z.a,{arr:["Promotions  List"]}),F.a.createElement("h3",null,"Promotions List"),F.a.createElement("img",{src:D.a,className:"aset",alt:"aset"})),F.a.createElement("div",{className:"base-wr"},F.a.createElement("div",{className:"base-style"},F.a.createElement(K,{changeSearch:function(e){var a=Object(v.a)(Object(v.a)({},e),{},{page_size:10,start_row:0,search:e});r(Object(v.a)(Object(v.a)({},n),{},{search:e})),d(a)},loading:n.loading})),F.a.createElement(m.a,null,F.a.createElement(u.a,{span:24},F.a.createElement("div",{className:"base-style"},F.a.createElement(m.a,null,F.a.createElement(u.a,{span:24,style:{textAlign:"right",marginBottom:"15px"}},F.a.createElement(s.a,{type:"primary",onClick:function(){e.history.push("/mobile_app_management/promotion_detail/0")}},"Add promotion"))),F.a.createElement(y.a,{columns:J((function(a){console.log("data",a),e.history.push("/mobile_app_management/promotion_detail/"+a.id)})),rowKey:function(e){return e.key},dataSource:n.list,onChange:function(e){console.log("state",n);var a=Object(v.a)(Object(v.a)({},n.search),{},{page_size:e.pageSize,start_row:e.pageSize*(e.current-1),search:n.search});console.log("ttt",a),d(a)},loading:n.loading,bordered:!0,rowSelection:Object(v.a)({type:"checkbox"},(function(){})),pagination:n.pagination,scroll:{scrollToFirstRowOnChange:!0,x:1e3}}))))))};a.default=B}}]);