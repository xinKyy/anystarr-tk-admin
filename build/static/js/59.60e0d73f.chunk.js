(this["webpackJsonpreact-admin"]=this["webpackJsonpreact-admin"]||[]).push([[59],{1811:function(e,a,t){"use strict";t.r(a);t(54);var n=t(55),l=t.n(n),c=(t(76),t(78)),r=t.n(c),i=(t(72),t(66)),s=t.n(i),o=t(62),m=(t(86),t(87)),u=t.n(m),p=(t(51),t(50)),d=t.n(p),g=(t(57),t(59)),b=t.n(g),E=(t(58),t(60)),f=t.n(E),h=(t(69),t(70)),y=t.n(h),O=(t(65),t(67)),j=t.n(O),v=t(53),x=(t(63),t(61)),w=t.n(x),S=(t(74),t(75)),N=t.n(S),k=t(0),F=t.n(k),z=t(71),C=(t(107),t(56)),T=t(95),R=(t(15),t(73)),_=t.n(R),I=t(1839),A=(N.a.MonthPicker,N.a.RangePicker,w.a.Option),D=([{label:"\u5f85\u5904\u7406",value:"to_handle"},{label:"\u5df2\u5904\u7406",value:"handled"}].map((function(e,a){return F.a.createElement(A,{key:a,value:e.value},e.label)})),function(e,a,t,n){return[{title:"Action",dataIndex:"edit",key:"edit",width:"100",align:"center",render:function(a,t){return F.a.createElement("div",null,F.a.createElement("a",{className:"action-btn",onClick:function(){e(t)}},"Edit"))}},{title:"ID",dataIndex:"id",key:"id",width:"100",align:"center",render:function(e,a){return F.a.createElement("span",{className:"table-id"},e)}},{title:"Type",dataIndex:"type",key:"type",align:"center",width:"160",render:function(e,a){return 1==e?F.a.createElement("span",{className:"table-row-p"},F.a.createElement(I.a,{style:{color:"#868AF6",fontSize:"13px",marginRight:"3px"}}),"Verification code email"):2==e?F.a.createElement("span",{className:"table-row-green"},F.a.createElement(I.a,{style:{color:"#18BFA4",fontSize:"13px",marginRight:"3px"}}),"welcome email"):3==e?F.a.createElement("span",{className:"table-row-red"},F.a.createElement(I.a,{style:{color:"#f85c5a",fontSize:"13px",marginRight:"3px"}}),"activation email"):4==e?F.a.createElement("span",{className:"table-row-red"},F.a.createElement(I.a,{style:{color:"#f85c5a",fontSize:"13px",marginRight:"3px"}}),"Customer service reply email"):F.a.createElement("span",{className:"table-row-green"},F.a.createElement(I.a,{style:{color:"#18BFA4",fontSize:"13px",marginRight:"3px"}}),n[e])}},{title:"Language",dataIndex:"language",key:"language",align:"center",render:function(e,a){return 1==e?F.a.createElement("span",{className:"table-row-p"},F.a.createElement(I.a,{style:{color:"#868AF6",fontSize:"13px",marginRight:"3px"}}),"English"):2==e?F.a.createElement("span",{className:"table-row-green"},F.a.createElement(I.a,{style:{color:"#18BFA4",fontSize:"13px",marginRight:"3px"}}),"French"):3==e?F.a.createElement("span",{className:"table-row-red"},F.a.createElement(I.a,{style:{color:"#f85c5a",fontSize:"13px",marginRight:"3px"}}),"Spanish"):4==e?F.a.createElement("span",{className:"table-row-red"},F.a.createElement(I.a,{style:{color:"#f85c5a",fontSize:"13px",marginRight:"3px"}}),"Polish"):5==e?F.a.createElement("span",{className:"table-row-p"},F.a.createElement(I.a,{style:{color:"#868AF6",fontSize:"13px",marginRight:"3px"}}),"Portuguese"):null}},{title:"Title",dataIndex:"title",key:"title",align:"center"}]}),P={labelCol:{span:8},wrapperCol:{span:16}},B=function(e){var a=j.a.useForm(),t=Object(v.a)(a,1)[0];return F.a.createElement(j.a,Object.assign({},P,{form:t,name:"advanced_search",className:"ant-advanced-search-form",onFinish:function(a){e.changeSearch(a)}}),F.a.createElement(b.a,{gutter:24},F.a.createElement(f.a,{span:8},F.a.createElement(j.a.Item,{name:"id",label:" ID"},F.a.createElement(y.a,null))),F.a.createElement(f.a,{span:8},F.a.createElement(j.a.Item,{name:"type",label:"Type"},F.a.createElement(w.a,null,Object.keys(e.temType)&&Object.keys(e.temType).map((function(a,t){return F.a.createElement(A,{value:a},e.temType[a])}))))),F.a.createElement(f.a,{span:8},F.a.createElement(j.a.Item,{name:"language",label:"Language"},F.a.createElement(w.a,null,F.a.createElement(A,{value:1},"English"),F.a.createElement(A,{value:2},"French"),F.a.createElement(A,{value:3},"Spanish"),F.a.createElement(A,{value:4},"Polish"),F.a.createElement(A,{value:5},"Portuguese"))))),F.a.createElement(b.a,null,F.a.createElement(f.a,{span:24,style:{textAlign:"right"}},F.a.createElement(d.a,{type:"primary",htmlType:"submit"},"Search"),F.a.createElement(d.a,{style:{margin:"0 8px"},onClick:function(){t.resetFields()}},"Reset"))))},J=function(e){var a=e.visible,t=e.onCreate,n=e.onCancel,l=e.formData,c=(e.disabled,j.a.useForm()),r=Object(v.a)(c,1)[0],i=Object(k.useState)({}),s=Object(v.a)(i,2),o=(s[0],s[1],Object(k.useState)(!1)),m=Object(v.a)(o,2);m[0],m[1];Object(k.useEffect)((function(){Object.keys(l).length?r.setFieldsValue(l):r.resetFields()}),[]);return F.a.createElement(u.a,{visible:a,title:"\u521b\u5efa\u9080\u8bf7\u7801",okText:"Submit",cancelText:"Cancel",onCancel:n,onOk:function(){r.validateFields().then((function(e){r.resetFields(),t(e)})).catch((function(e){console.log("Validate Failed:",e)}))}},F.a.createElement(j.a,Object.assign({},{labelCol:{span:6},wrapperCol:{span:14}},{form:r,name:"form_in_modal"}),F.a.createElement(j.a.Item,{name:"email",label:"email",rules:[{required:!0}]},F.a.createElement(y.a,null))))},L=function(e){var a=Object(k.useState)({list:[],pagination:{current:1,pageSize:20},search:{},loading:!0,visible:!1,disabled:!1,formData:{}}),t=Object(v.a)(a,2),n=t[0],c=t[1],i=Object(k.useState)({visible:!1,data:{}}),m=Object(v.a)(i,2),u=(m[0],m[1],Object(k.useState)({})),p=Object(v.a)(u,2),g=p[0],E=p[1];Object(k.useEffect)((function(){n.pagination;Object(C.Ob)().then((function(e){E(e.data.messageTypes),console.log(e.data.messageTypes)}));var e={start_row:0,page_size:n.pagination.pageSize};h(e)}),[]);var h=function(e){n.pagination,n.search;c(Object(o.a)(Object(o.a)({},n),{},{loading:!0})),Object(C.hb)(JSON.stringify(e)).then((function(e){c(Object(o.a)(Object(o.a)({},n),{},{visible:!1,list:e.data.list&&Object(T.getKeyList)(e.data.list),loading:!1,pagination:{total:e.data.pager.total}}))})).catch((function(e){console.log("err",e)}))};return F.a.createElement(l.a,{className:"animated fadeIn"},F.a.createElement(J,{visible:n.visible,onCreate:function(e){console.log("data",e),Object(C.j)(e).then((function(e){s.a.success("success");var a=Object(o.a)({},n.search);h(a)})).catch((function(e){console.log("err",e)}))},onCancel:function(){c(Object(o.a)(Object(o.a)({},n),{},{visible:!1}))},formData:n.formData,disabled:n.disabled}),F.a.createElement("div",{className:"web-bread-c"},F.a.createElement(z.a,{arr:["Email Template"]}),F.a.createElement("h3",null,"Email Template"),F.a.createElement("img",{src:_.a,className:"aset",alt:"aset"})),F.a.createElement("div",{className:"base-wr"},F.a.createElement("div",{className:"base-style"},F.a.createElement(B,{changeSearch:function(e){var a=Object(o.a)(Object(o.a)({},e),{},{page_size:10,start_row:0});h(a),c(Object(o.a)(Object(o.a)({},n),e))},temType:g})),F.a.createElement(b.a,null,F.a.createElement(f.a,{span:24},F.a.createElement("div",{className:"base-style"},F.a.createElement(b.a,null,F.a.createElement(f.a,{span:24,style:{textAlign:"right",marginBottom:"15px"}},F.a.createElement(d.a,{type:"primary",onClick:function(){e.history.push("/email_tem_detail/0")}},"New Email Tempalte"))),F.a.createElement(r.a,{columns:D((function(a){e.history.push("/email_tem_detail/"+a.id)}),0,0,g),rowKey:function(e){return e.key},dataSource:n.list,onChange:function(e){var a=Object(o.a)(Object(o.a)({},n.search),{},{page_size:e.pageSize,start_row:e.pageSize*(e.current-1)});h(a)},loading:n.loading,expandable:{expandedRowRender:function(e){return F.a.createElement("p",{style:{margin:0}},e.content)},rowExpandable:function(e){return"Not Expandable"!==e.name}},bordered:!0,rowSelection:Object(o.a)({type:"checkbox"},(function(){})),pagination:n.pagination,scroll:{scrollToFirstRowOnChange:!0,x:1e3}}))))))};a.default=L}}]);